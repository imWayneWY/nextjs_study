{"version":3,"file":"static/webpack/static/development/pages/index.js.919cd03aceefef7a1a21.hot-update.js","sources":["webpack:///./pages/index.js"],"sourcesContent":["import axios from 'axios'\nimport { useEffect } from 'react'\nimport { Button } from 'antd'\nimport getConfig from 'next/config'\n\nconst { publicRuntimeConfig } = getConfig()\n\n\n\nconst api = require('../lib/api')\n\nfunction Index ({ userRepos, userStaredRepos, isLogin }) { \n  if (!isLogin) {\n    return <div className=\"root\">\n      <p>You haven't login yet</p>\n      <Button type=\"primary\" href={publicRuntimeConfig.OAUTH_URL}>Login</Button>\n    </div>\n  }\n  return <span>Index</span> \n}\nIndex.getInitialProps = async ({ctx, reduxStore}) => {\n  // const result =   await  axios.get('/github/search/repositories?q=react')\n  //     .then(resp => console.log(resp))\n\n  // ctx.req and ctx.res only works when it is run on server\n  const user = reduxStore.getState().user\n  if (!user || !user.id) {\n    return {\n      isLogin: false,\n    }\n  }\n  const userRepos = await api.request(\n    {\n      // url: '/search/repositories?q=react',\n      url: '/user/repos',\n    },\n    ctx.req,\n    ctx.res\n  )\n  const userStaredRepos = await api.request({\n    url: '/user/starred',\n  }, ctx.req, ctx.res)\n  return {\n    // data: result.data\n    isLogin: true,\n    userRepos: userRepos.data,\n    userStaredRepos: userStaredRepos.data,\n  }\n}\n\nexport default Index"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AACA;AACA;AAAA;AACA;AAGA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAEA;AAAA;AAAA;AAEA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AACA;AADA;AAQA;AADA;AACA;AARA;AAAA;AAAA;AAaA;AACA;AAFA;AACA;AAbA;AAWA;AAXA;AAAA;AAoBA;AADA;AACA;AApBA;AAmBA;AAnBA;AAuBA;AACA;AACA;AACA;AAJA;AACA;AAvBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AA6BA;;;;A","sourceRoot":""}